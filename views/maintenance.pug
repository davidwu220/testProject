extends maintenance_layout

block content
    if flash.error
        .alert.alert-danger.alert-dismissible.fade.show(role="alert")
            p.alert-message !{flash.error}
            button.close(type="button" data-dismiss="alert" aria-label="Close")
                span(aria-hidden='true') &times;
    if flash.success
        .alert.alert-success.alert-dismissible.fade.show(role="alert")
            .alert-message !{flash.success}
            button.close(type="button" data-dismiss="alert" aria-label="Close")
                span(aria-hidden='true') &times;
    
    // Deletion modal
    #deleteModal.modal.fade(tabindex="-1" role="dialog")
        .modal-dialog(role="document")
            .modal-content
                .modal-header
                    h5#deleteModalLabel.modal-title Delete
                    button.close(type="button" data-dismiss="modal")
                        span &times;
                .modal-body
                    // will set action by data-* attribute
                    form#deleteModalForm(method='POST' action='')
                        .form-group
                            label.col-form-label(for="ad_id") Ad ID:
                            input#ad_id.form-control(type='text' readonly)
                        .form-group
                            label.col-form-label(for="location") Location:
                            input#location.form-control(type='text' readonly)
                        .form-group
                            label.col-form-label(for="title") Title:
                            input#title.form-control(type='text' readonly)
                        .form-group
                            label.col-form-label(for="image") Image:
                            div#deleteModalImagePlaceHolder()
                        .form-group
                            label.col-form-label(for="yt_short_link") YouTube Short Link:
                            input#yt_short_link.form-control(type='text' readonly)
                        .form-group
                            label.col-form-label(for="yt_full_link") YouTube Full Link:
                            input#yt_full_link.form-control(type='text' readonly)
                        .modal-footer
                            button.btn.btn-secondary(type="button" data-dismiss="modal") Close
                            button.btn.btn-danger(type='submit') Delete

    .row
        h1.display-4.mb-2 #{title}
    .row
        table.table.table-hover.table-responsive-sm
            thead.thead-light
                tr
                    th(scope="col") #
                    th(scope="col") Title
                    th(scope="col") Location
                    th(scope="col") Start Date
                    th(scope="col") End Date
                    th(scope="col") Tags
                    th(scope="col") Edit
                    th(scope="col") Delete
            tbody
                each ad, index in ads
                    tr
                        th(scope="row")= index + 1
                        th #{ad.title}
                        th #{ad.location}
                        th #{ad.start_date}
                        th #{ad.end_date}
                        th
                            each tag in ad.tags
                                | #{tag.cat_cn + ', '}
                        th
                            a.btn.btn-outline-info(role="button" href="/maintenance/" + ad._id + "/edit")
                                i.fa.fa-pencil-square-o
                                |
                                | Edit
                        th
                            button.btn.btn-outline-danger(role="button" data-toggle="modal" data-target="#deleteModal" data-post-to=("/maintenance/" + ad._id + "/delete") data-ad-id=ad._id data-title=ad.title data-location=ad.location data-image=ad.image data-yt_short_link=ad.yt_short_link data-yt_full_link=ad.yt_full_link)
                                    i.fa.fa-trash-o
                                    |
                                    | Delete

